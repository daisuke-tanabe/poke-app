# ポケモン図鑑アプリ 要件定義書

## 1. データ要件

- ポケモンは何匹でも登録できる。
- ポケモンは必ず全国図鑑（pokedex_id=1）に属し、1つ以上の地方図鑑にも属する。
- ポケモンは必ず1つ以上のタイプ（例：炎、水など）を持つ。
- ポケモン削除時は関連する図鑑エントリ（PokedexEntry）、タイプエントリ（TypeEntry）も自動削除（ON DELETE CASCADE）。
- 各図鑑エントリには図鑑名（日本語名）、図鑑番号、slugが含まれる。

## 2. 機能要件

### 2.1 ポケモン検索

- 図鑑名、タイプ1、タイプ2、名前の4条件でAND検索できる。
- 図鑑名は地方ごとにグループ化されたセレクトボックスで選択（初期値は「全国」）。
- タイプ1・タイプ2はそれぞれセレクトボックスで選択（初期値は「すべて」）。
- 名前は日本語・英語・カナのいずれかに部分一致。
- 検索ボタン押下時のみ検索実行。
- ページネーション対応（1ページ20件）。
- 検索条件はURLクエリパラメータに反映。

### 2.2 ポケモン詳細

- 日本語名、英語名、ローマ名、所属図鑑、タイプ、体重、身長を表示。

## 3. UI/UX要件

### 3.1 検索UI

- 図鑑名・タイプ1・タイプ2・名前の4条件で検索可能。
- 図鑑セレクトは地方ごとにグループ化。
- タイプセレクトは「タイプ1を選択」「タイプ2を選択」ラベル。
- 名前入力欄は「名前を入力」ラベル。
- 検索ボタンでのみ検索実行。

### 3.2 検索結果表示

- 各ポケモンカードに以下を表示：
  - 日本語名・英語名
  - 検索対象になった図鑑（pokedex）の番号を表示する
    - 例: カントー図鑑で検索した場合はカントー図鑑番号、ホウエン図鑑ならホウエン図鑑番号
    - 検索条件（pokedexのslug）に該当するpokedexEntriesから番号を取得し表示
    - national図鑑（slug: national）で検索時は全国図鑑番号
    - ※全てのポケモンは必ず全国図鑑・地方図鑑いずれかに所属し、entry_numberが存在する
  - タイプバッジは`public/type-icons/*`から使用する


## 4. データ取得・API要件

- 検索結果の各ポケモンには、必ず「全国図鑑」と「所属する地方図鑑」の両方の図鑑エントリが含まれること。
- 検索条件が全国図鑑の場合も、地方図鑑エントリを除外せず全て含めて返すこと。
- 各図鑑エントリには図鑑名（日本語名）、図鑑番号、slugが含まれること。

## 5. 非機能要件

- 対応ブラウザ：Google Chrome、Edge、Safari / iOS Safari、Android（直前のメジャーバージョン2つ前まで保証）
- TypeScript v5 latest、Next.js v15 latest、Node.js v22 latest、PostgreSQL v17 latest、Prisma v6 latestを使用

## 6. 開発・運用環境

- データアクセスレイヤーを設け、サーバーコンポーネントからデータベース操作を行う。
- バックエンドはNode.js、データベースはPostgreSQL、ORMはPrismaを利用。
- UIコンポーネントライブラリとして shadcn/ui（shadcn） を導入し、デザイン・UI実装に利用する。
